---
# Global defaults shared across less-vision Ansible roles. These values mirror
# the original role defaults so behaviour remains consistent while allowing the
# new xray_deploy workflow to consume the same variables.

project_root: "/opt/xray"
compose_project_directory: "{{ project_root }}/compose"
xray_config_dir: "{{ project_root }}/xray"
certificates_dir: "{{ project_root }}/certificates"

xray_domain: ""
xray_email: ""
xray_uuid: ""

xray_certificate_path: "{{ certificates_dir }}/live/{{ xray_domain }}/fullchain.pem"
xray_private_key_path: "{{ certificates_dir }}/live/{{ xray_domain }}/privkey.pem"
xray_container_certificate_path: "/etc/ssl/live/{{ xray_domain }}/fullchain.pem"
xray_container_private_key_path: "/etc/ssl/live/{{ xray_domain }}/privkey.pem"

letsencrypt_image: "certbot/certbot:latest"
letsencrypt_staging: false
force_regenerate_certs: false

xray_log_level: "warning"
xray_inbound_port: 443
xray_service_port: "{{ xray_inbound_port }}"
xray_flow: "xtls-rprx-vision"
xray_client_email: "{{ xray_email | default('client@example.com', true) }}"
xray_alpn:
  - h2
  - http/1.1

xray_image: "ghcr.io/xtls/xray-core:25.10.15"
xray_container_user: "0:0"
xray_container_name: "xray"
xray_failure_log_lines: 200
docker_compose_up: true
docker_compose_down_before_up: true
docker_compose_remove_orphans: true

xray_service_root: "{{ project_root }}"
xray_service_name: "{{ xray_container_name }}"
xray_config_path: "{{ xray_config_dir }}"
xray_config_file: "config.json"
xray_compose_file: "{{ compose_project_directory }}/docker-compose.yml"
xray_container_image: "{{ xray_image }}"
xray_container_confdir: "/usr/local/etc/xray"
xray_restart_policy: "unless-stopped"
xray_host_port: "{{ xray_inbound_port }}"
xray_container_port: "{{ xray_service_port }}"
xray_compose_environment: {}
xray_compose_networks: []

xray_deploy_wait_seconds: 60
xray_deploy_recovery_wait_seconds: 30
xray_deploy_log_tail_lines: 300
xray_common_docker_user: "ubuntu"
docker_prereqs_user: "{{ xray_common_docker_user }}"
